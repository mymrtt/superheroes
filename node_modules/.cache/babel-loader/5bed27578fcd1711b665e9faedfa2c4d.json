{"ast":null,"code":"var _jsxFileName = \"/home/yasmin/Documentos/personal/code/simple/src/screens/Onboarding.js\";\n// Libs\nimport React, { Component, Fragment } from 'react';\nimport styled from 'styled-components';\nimport { connect } from 'react-redux';\nimport { Redirect } from 'react-router-dom'; // Images\n\nimport background from '../assets/onboardingp.jpeg'; // Components\n\nimport Input from '../components/Input';\nimport Button from '../components/Button'; // Services\n\nimport { createUser, login } from '../services/api';\nimport { newUser } from '../dataflow/modules/onboarding-modules';\n\nconst mapDispatchToProps = dispatch => ({\n  newUser: user => {\n    dispatch(newUser(user));\n  }\n}); // Styles\n\n\nconst Container = styled.div`\n  display: flex;\n  height: 100vh;\n  font-family: 'Overpass', Regular;\n`;\nconst CreatorName = styled.p`\n  padding-left: 1rem;\n  position: fixed;\n  bottom: 0;\n  font-size: .9rem;\n  font-weight: bold;\n`;\nconst ContainerBg = styled.aside`\n  background-image: url(${background});\n  background-position: bottom;\n  width: 50%;\n`;\nconst Content = styled.div`\n  width: 50%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n`;\nconst Form = styled.form`\n  width: 75%;\n  display: flex;\n  flex-direction: column;\n  align-self: flex-end;\n`;\nconst Title = styled.h1`\n  margin-bottom: 3rem;\n  font-size: 2.5rem;\n`;\nconst AnotherOptionText = styled.p`\n  margin-top: 2rem;\n  width: fit-content;\n\n  span {\n    color: #2EC4B6;\n    cursor: pointer;\n  }\n`;\nconst ErrorMessage = styled.p`\n  color: tomato;\n  font-size: .8rem;\n  font-weight: 800;\n`;\nconst ShowPasswordIcon = styled.img`\n  position: absolute;\n`;\n\nclass Onboarding extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      isCreateAccount: false,\n      user: {\n        username: '',\n        email: '',\n        password: ''\n      },\n      usernameError: false,\n      emailError: false,\n      passwordError: false,\n      redirect: undefined,\n      showPassword: false\n    };\n\n    this.createUserAccount = async user => {\n      try {\n        const response = await createUser(user);\n        console.log('response create user api', response);\n      } catch (error) {\n        console.log('error', error);\n      }\n    };\n\n    this.UserLogin = async user => {\n      try {\n        const response = await login(user.email, user.password);\n\n        if (response) {\n          const deconstructing = response.data;\n          localStorage.setItem('sessionToken', deconstructing.sessionToken);\n          localStorage.setItem('username', deconstructing.username);\n          this.setState({\n            redirect: '/dashboard'\n          });\n        }\n      } catch (error) {\n        console.log('error', error);\n      }\n    };\n\n    this.handleCreateAccount = () => {\n      this.setState({\n        isCreateAccount: !this.state.isCreateAccount\n      });\n    };\n\n    this.handleSubmit = event => {\n      const {\n        user,\n        isCreateAccount,\n        usernameError,\n        emailError,\n        passwordError\n      } = this.state;\n      event.preventDefault();\n\n      if (!usernameError && !emailError && !passwordError) {\n        if (!isCreateAccount) {\n          delete user.username;\n          this.UserLogin(user);\n        } else {\n          this.createUserAccount(user);\n          this.props.newUser(user);\n        }\n      }\n    };\n\n    this.handleChange = (field, ev) => {\n      const {\n        user\n      } = this.state;\n      user[field] = ev.target.value;\n\n      if (field === 'username') {\n        this.setState({\n          usernameError: ev.target.value.length < 4\n        });\n      }\n\n      if (field === 'email') {\n        this.setState({\n          emailError: ev.target.value.length < 6\n        });\n      }\n\n      if (field === 'password') {\n        this.setState({\n          passwordError: ev.target.value.length < 6\n        });\n      }\n\n      this.setState({\n        user\n      });\n    };\n\n    this.handleShowPassword = () => {\n      this.setState({\n        showPassword: !this.state.showPassword\n      });\n    };\n  }\n\n  render() {\n    const {\n      isCreateAccount,\n      user,\n      usernameError,\n      emailError,\n      passwordError,\n      redirect\n    } = this.state;\n    return /*#__PURE__*/React.createElement(Container, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(CreatorName, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 9\n      }\n    }, \"Desenvolvido por Yasmin Miranda\"), /*#__PURE__*/React.createElement(Content, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Form, {\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Title, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 13\n      }\n    }, isCreateAccount ? 'Criar Conta' : 'Login'), isCreateAccount && /*#__PURE__*/React.createElement(Input, {\n      type: \"text\",\n      label: \"Username\",\n      placeholder: \"Insira o seu username\",\n      value: user.username,\n      onChange: ev => this.handleChange('username', ev),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 17\n      }\n    }), usernameError && /*#__PURE__*/React.createElement(ErrorMessage, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 33\n      }\n    }, \"Insira um username v\\xE1lido.\"), /*#__PURE__*/React.createElement(Input, {\n      type: \"email\",\n      label: \"E-mail\",\n      placeholder: \"voc\\xEA@exemplo.com\",\n      value: user.email,\n      onChange: ev => this.handleChange('email', ev),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 15\n      }\n    }), emailError && /*#__PURE__*/React.createElement(ErrorMessage, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 30\n      }\n    }, \"Insira um e-mail v\\xE1lido.\"), /*#__PURE__*/React.createElement(Input, {\n      type: this.state.showPassword ? 'text' : 'password',\n      label: \"Senha\",\n      placeholder: \"Insira a sua senha\",\n      value: user.password,\n      onChange: ev => this.handleChange('password', ev),\n      pass: true,\n      inputWidth: \"92%\",\n      borderBottom: \"transparent\",\n      showPass: this.state.showPassword,\n      handleShowPassword: this.handleShowPassword,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 17\n      }\n    }), passwordError && /*#__PURE__*/React.createElement(ErrorMessage, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 33\n      }\n    }, \"Insira uma senha v\\xE1lida.\"), /*#__PURE__*/React.createElement(Button, {\n      text: isCreateAccount ? 'Criar Conta' : 'Login',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(AnotherOptionText, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 13\n      }\n    }, isCreateAccount ? /*#__PURE__*/React.createElement(Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 17\n      }\n    }, \"Voc\\xEA j\\xE1 possui uma conta? \", /*#__PURE__*/React.createElement(\"span\", {\n      onClick: this.handleCreateAccount,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 45\n      }\n    }, \"Fa\\xE7a Login\")) : /*#__PURE__*/React.createElement(Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 17\n      }\n    }, \"Voc\\xEA ainda n\\xE3o possui uma conta? \", /*#__PURE__*/React.createElement(\"span\", {\n      onClick: this.handleCreateAccount,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 52\n      }\n    }, \"Crie agora\"))))), /*#__PURE__*/React.createElement(ContainerBg, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 9\n      }\n    }), redirect && /*#__PURE__*/React.createElement(Redirect, {\n      exact: true,\n      to: redirect,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 22\n      }\n    }));\n  }\n\n}\n\nexport default connect(null, mapDispatchToProps)(Onboarding);","map":{"version":3,"sources":["/home/yasmin/Documentos/personal/code/simple/src/screens/Onboarding.js"],"names":["React","Component","Fragment","styled","connect","Redirect","background","Input","Button","createUser","login","newUser","mapDispatchToProps","dispatch","user","Container","div","CreatorName","p","ContainerBg","aside","Content","Form","form","Title","h1","AnotherOptionText","ErrorMessage","ShowPasswordIcon","img","Onboarding","state","isCreateAccount","username","email","password","usernameError","emailError","passwordError","redirect","undefined","showPassword","createUserAccount","response","console","log","error","UserLogin","deconstructing","data","localStorage","setItem","sessionToken","setState","handleCreateAccount","handleSubmit","event","preventDefault","props","handleChange","field","ev","target","value","length","handleShowPassword","render"],"mappings":"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","sourcesContent":["// Libs\nimport React, { Component, Fragment } from 'react';\nimport styled from 'styled-components';\nimport { connect } from 'react-redux';\nimport { Redirect } from 'react-router-dom';\n\n// Images\nimport background from '../assets/onboardingp.jpeg';\n\n// Components\nimport Input from '../components/Input';\nimport Button from '../components/Button';\n\n// Services\nimport { createUser, login } from '../services/api';\nimport { newUser } from '../dataflow/modules/onboarding-modules';\n\nconst mapDispatchToProps = dispatch => ({\n\tnewUser: (user) => {\n\t\tdispatch(newUser(user));\n\t},\n});\n\n// Styles\nconst Container = styled.div`\n  display: flex;\n  height: 100vh;\n  font-family: 'Overpass', Regular;\n`;\n\nconst CreatorName = styled.p`\n  padding-left: 1rem;\n  position: fixed;\n  bottom: 0;\n  font-size: .9rem;\n  font-weight: bold;\n`;\n\nconst ContainerBg = styled.aside`\n  background-image: url(${background});\n  background-position: bottom;\n  width: 50%;\n`;\n\nconst Content = styled.div`\n  width: 50%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n`;\n\nconst Form = styled.form`\n  width: 75%;\n  display: flex;\n  flex-direction: column;\n  align-self: flex-end;\n`;\n\nconst Title = styled.h1`\n  margin-bottom: 3rem;\n  font-size: 2.5rem;\n`;\n\nconst AnotherOptionText = styled.p`\n  margin-top: 2rem;\n  width: fit-content;\n\n  span {\n    color: #2EC4B6;\n    cursor: pointer;\n  }\n`;\n\nconst ErrorMessage = styled.p`\n  color: tomato;\n  font-size: .8rem;\n  font-weight: 800;\n`;\n\nconst ShowPasswordIcon = styled.img`\n  position: absolute;\n`;\n\nclass Onboarding extends Component {\n  state = {\n    isCreateAccount: false,\n    user: {\n      username: '',\n      email: '',\n      password: '',\n    },\n    usernameError: false,\n    emailError: false,\n    passwordError: false,\n    redirect: undefined,\n    showPassword: false,\n  };\n\n\n  createUserAccount = async (user) => {\n    try {\n      const response = await createUser(user);\n\n      console.log('response create user api', response)\n      \n    } catch (error) {\n      console.log('error', error)\n    }\n  }\n\n  UserLogin = async (user) => {\n    try {\n      const response = await login(user.email, user.password);\n\n      if (response) {\n        const deconstructing = response.data;\n\n        localStorage.setItem('sessionToken', deconstructing.sessionToken);\n        localStorage.setItem('username',  deconstructing.username);\n        \n        this.setState({\n          redirect: '/dashboard',\n        });\n      }\n    } catch (error) {\n      console.log('error', error)\n    }\n  }\n\n  handleCreateAccount = () => {\n    this.setState({\n      isCreateAccount: !this.state.isCreateAccount,\n    });\n  }\n\n  handleSubmit = (event) => {\n    const { user, isCreateAccount, usernameError, emailError, passwordError } = this.state;\n\n    event.preventDefault();\n\n    if (!usernameError && !emailError && !passwordError) {\n      if (!isCreateAccount) {\n        delete user.username;\n        \n        this.UserLogin(user);\n      } else {\n        this.createUserAccount(user);\n        this.props.newUser(user);\n      }\n    }\n  }\n\n  handleChange = (field, ev) => {\n    const { user } = this.state;\n\n    user[field] = ev.target.value;\n\n    if (field === 'username') {\n      this.setState({\n        usernameError: ev.target.value.length < 4,\n      });\n    }\n\n    if (field === 'email') {\n      this.setState({\n        emailError: ev.target.value.length < 6,\n      });\n    }\n\n    if (field === 'password') {\n      this.setState({\n        passwordError: ev.target.value.length < 6,\n      });\n    }\n\n    this.setState({\n      user,\n    })\n  }\n\n  handleShowPassword = () => {\n    this.setState({\n      showPassword: !this.state.showPassword,\n    });\n  }\n\n  render() {\n    const { isCreateAccount, user, usernameError, emailError, passwordError, redirect } = this.state;\n\n    return (\n      <Container>\n        <CreatorName>Desenvolvido por Yasmin Miranda</CreatorName>\n        <Content>\n          <Form onSubmit={this.handleSubmit}>\n            <Title>{isCreateAccount ? 'Criar Conta' : 'Login'}</Title>\n              {isCreateAccount && (\n                <Input\n                  type=\"text\"\n                  label=\"Username\"\n                  placeholder=\"Insira o seu username\"\n                  value={user.username}\n                  onChange={(ev) => this.handleChange('username', ev)}\n                />\n              )}\n              {usernameError && <ErrorMessage>Insira um username válido.</ErrorMessage>}\n              <Input\n                type=\"email\" \n                label=\"E-mail\"\n                placeholder=\"você@exemplo.com\"\n                value={user.email}\n                onChange={(ev) => this.handleChange('email', ev)}\n              />\n              {emailError && <ErrorMessage>Insira um e-mail válido.</ErrorMessage>}\n                <Input\n                  type={this.state.showPassword ? 'text' : 'password'}\n                  label=\"Senha\"\n                  placeholder=\"Insira a sua senha\"\n                  value={user.password}\n                  onChange={(ev) => this.handleChange('password', ev)}\n                  pass={true}\n                  inputWidth=\"92%\"\n                  borderBottom=\"transparent\"\n                  showPass={this.state.showPassword}\n                  handleShowPassword={this.handleShowPassword}\n                />\n                {/* {!this.state.showPassword ? (\n                  <ShowPasswordIcon src={eyeOn} alt=\"\" onClick={this.handleShowPassword} />\n                ) : (<ShowPasswordIcon src={eyeOff} alt=\"\" onClick={this.handleShowPassword} />)} */}\n              {passwordError && <ErrorMessage>Insira uma senha válida.</ErrorMessage>}\n              <Button \n                text={isCreateAccount ? 'Criar Conta' : 'Login'}\n              />\n            <AnotherOptionText>\n              {isCreateAccount ? (\n                <Fragment>\n                  Você já possui uma conta? <span onClick={this.handleCreateAccount}>Faça Login</span>\n                </Fragment>\n              ) : (\n                <Fragment>\n                  Você ainda não possui uma conta? <span onClick={this.handleCreateAccount}>Crie agora</span>\n                </Fragment>\n              )}\n            </AnotherOptionText>\n          </Form>\n        </Content>\n        <ContainerBg>\n          {/* <p>background</p> */}\n        </ContainerBg>\n        {redirect && <Redirect exact to={redirect} />}\n      </Container>\n    )\n  }\n}\n\nexport default connect(null, mapDispatchToProps)(Onboarding);\n"]},"metadata":{},"sourceType":"module"}