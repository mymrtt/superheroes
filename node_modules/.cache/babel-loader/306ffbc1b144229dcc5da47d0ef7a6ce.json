{"ast":null,"code":"var _jsxFileName = \"/home/yasmin/Documentos/personal/code/desafio/desafio-correto/src/screens/SuperHeroes.js\";\n// Libs\nimport React, { Component } from 'react';\nimport styled from 'styled-components';\nimport { connect } from 'react-redux'; // Components\n\nimport Card from '../components/Card';\nimport Input from '../components/Input';\nimport Layout from '../components/layout'; // // Images\n\nimport searchIcon from \"../assets/search.svg\";\nimport loaderIcon from \"../assets/loader.svg\"; // Services\n\nimport { getAllHeroes, getHeroByName } from '../services/apiSuperHero'; // Redux\n\nimport { searchHero, unfavHero, favHero } from '../dataflow/modules/heroes-modules';\n\nconst mapStateToProps = state => ({\n  listSearch: state.heroes.listSearch,\n  listFavorites: state.heroes.listFavorites\n});\n\nconst mapDispatchToProps = dispatch => ({\n  searchHero: info => dispatch(searchHero(info)),\n  favHero: info => dispatch(favHero(info)),\n  unfavHero: info => dispatch(unfavHero(info))\n}); // Styles\n\n\nconst Container = styled.div`\n  width: 80%;\n  height: 100vh;\n  display: flex;\n  ${''\n/* background-color: #f2f4f7; */\n}\n\n  @media(max-width: 648px) {\n    width: 100%;\n  } \n`;\nconst Wrapper = styled.div`\n  padding-top: 2rem;\n  width: 100%;\n  display: flex;\n  justify-content: space-between;\n\n  @media(max-width: 768px) {\n    position: ${props => props.favsMob && 'relative'};\n    padding-top: ${props => props.favsMob && '5rem'};\n    display: flex;\n    flex-direction: column;\n  }\n`;\nconst ContainerTitle = styled.div`\n  margin: 2rem;\n  width: 30%;\n  max-width: 30%;\n  height: fit-content;\n\n  @media(max-width: 1024px) {\n    width: 45%;\n  }\n\n  @media(max-width: 768px) {\n    margin: 0;\n    padding: 0 3rem;\n    width: 100%;\n    max-width: 100%;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n  }\n\n  @media(max-width: 648px) {\n    margin-left: 0;\n  }\n`;\nconst Title = styled.h2`\n  font-size: 1.5rem;\n  text-align: center;\n`;\nconst ContainerSearch = styled.div`\n  margin-top: 2rem;\n  padding: 0;\n  width: 100%;\n  border: 1px solid #842219;\n  border-radius: 20px;\n  display: flex;\n  justify-content: space-around;\n  border-radius: 20px;\n\n  @media(max-width: 768px) {\n    width: 60%;\n  }\n\n  @media(max-width: 648px) {\n    width: 100%;\n  }\n`;\nconst SearchIcon = styled.img`\n  margin-right: .5rem;\n  margin-left: .5rem;\n  cursor: pointer;\n`;\nconst ContainerList = styled.div`\n  margin-top: 3rem;\n  width: 90%;\n  max-width: 90%;\n  height: 90vh;\n  display: inline-grid;\n  justify-items: center;\n  align-items: flex-start;\n  grid-template-columns: repeat(2, 1fr);\n  grid-row-gap: 1px;\n\n  @media(max-width: 1024px) {\n    padding: 0 5rem;\n    width: 100%;\n    grid-template-columns: repeat(1, 1fr);\n  }\n\n  @media(max-width: 768px) {\n    padding: 0 3rem;\n    max-width: 100%;\n    justify-content: center;\n  }\n\n  @media(max-width: 375px) {\n    padding: 0 1.55rem;\n  }\n`;\nconst ContainerCard = styled.div`\n  margin-top: ${props => props.fav && '4rem'};\n  width: inherit;\n  display: flex;\n  justify-content: center;\n`;\nconst ContainerLoader = styled.figure`\n  width: 100%;\n  height: -webkit-fill-available;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\nconst Loader = styled.img`\n  width: 3rem;\n`;\nconst ErrorMessage = styled.p`\n  margin: .5rem 0;\n  color: tomato;\n  font-size: .8rem;\n  font-weight: 800;\n\n  @media(max-width: 648px) {\n    margin-bottom: .9rem;\n  }\n`;\nconst ShowButton = styled.button`\n  position: fixed;\n  right: 0;\n  top: 0;\n  margin-top: 1rem;\n  margin-right: 1rem;\n  width: 8rem;\n  height: 3rem;\n  font-size: .8rem;\n  font-weight: 600;\n  color: #fff;\n  border: none;\n  border-radius: 20px;\n  cursor: pointer;\n  outline: none;\n  background-color: ${({\n  theme\n}) => theme.text};\n\n  @media(max-width: 768px) {\n    width: 7rem;\n    font-size: .75rem;\n    height: 2.5rem;\n  }\n\n  @media(max-width: 648px) {\n    position: absolute;\n    left: 0;\n    margin: 1rem 0 1rem .5rem;\n    height: 3rem;\n    color: ${({\n  theme\n}) => theme.text};\n    border: 1px solid;\n    background: transparent;\n  }\n`;\n\nclass SuperHeroes extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      superHerosList: [],\n      searchValue: '',\n      searchValueError: undefined,\n      isFetching: false,\n      heroSelected: undefined,\n      isSearch: false,\n      isFavoritesList: false\n    };\n\n    this.fetchingGetAllHeroes = async () => {\n      try {\n        this.setState({\n          isFetching: true\n        });\n        const heroes = [];\n        let i = 1;\n\n        while (i <= 3) {\n          const response = await getAllHeroes(Math.floor(Math.random() * 731 + 1));\n\n          if (response) {\n            heroes.push(response);\n          }\n\n          i += 1;\n        }\n\n        setTimeout(() => {\n          this.setState({\n            superHerosList: heroes\n          }); // this.props.addHero(heroes);\n\n          this.setState({\n            isFetching: false\n          });\n        }, 3000);\n      } catch (error) {\n        console.log('error', error);\n        console.log('error - response', error.response);\n      }\n    };\n\n    this.fetchingGetHeroByName = async heroName => {\n      try {\n        this.setState({\n          isFetching: true\n        });\n        const response = await getHeroByName(heroName);\n\n        if (response) {\n          this.setState({\n            isFetching: false,\n            isSearch: true,\n            searchValue: '',\n            superHerosList: response.data.results\n          }); // Enviando para o Redux\n\n          this.props.searchHero(response.data.results);\n        }\n      } catch (error) {\n        this.setState({\n          isFetching: false\n        });\n        console.log('error', error);\n        console.log('error - response', error.response);\n      }\n    };\n\n    this.handleValidateSearchValue = () => {\n      const {\n        searchValue\n      } = this.state;\n\n      if (!searchValue) {\n        this.setState({\n          searchValueError: 'Enter the name of a superhero.'\n        });\n      } else {\n        this.setState({\n          searchValueError: undefined\n        }); // Colocando a primeira letra das palavras em maiúsculo. No primeiro caso, verifica se há mais de duas palavras.\n\n        if (searchValue.includes(' ')) {\n          const value = searchValue.split(' ');\n          let newValue = [];\n\n          for (let x = 0; x < value.length; x++) {\n            newValue.push(value[x].charAt(0).toUpperCase() + value[x].slice(1));\n          }\n\n          this.fetchingGetHeroByName(newValue.join(' '));\n        } else {\n          const formatting = searchValue[0].toUpperCase() + searchValue.slice(1).toLowerCase();\n          this.fetchingGetHeroByName(formatting);\n        }\n      }\n    };\n\n    this.handleFavorites = () => {\n      this.setState({\n        isFavoritesList: !this.state.isFavoritesList\n      });\n    };\n\n    this.handleSearchValue = event => {\n      this.setState({\n        searchValue: event.target.value\n      });\n    };\n\n    this.handleSelectedHero = item => {\n      this.setState({\n        heroSelected: item\n      });\n    };\n\n    this.renderHeroList = () => {\n      const {\n        isSearch,\n        isFavoritesList,\n        heroSelected,\n        superHerosList\n      } = this.state;\n      const {\n        listSearch,\n        listFavorites\n      } = this.props;\n\n      if (isSearch && listSearch.length > 0) {\n        return listSearch.map(item => /*#__PURE__*/React.createElement(ContainerCard, {\n          onClick: () => this.handleSelectedHero(item),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 340,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(Card, {\n          hero: item,\n          selected: heroSelected,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 341,\n            columnNumber: 13\n          }\n        })));\n      } else if (isFavoritesList && listFavorites.length > 0) {\n        return listFavorites.map(item => /*#__PURE__*/React.createElement(ContainerCard, {\n          onClick: () => this.handleSelectedHero(item),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(Card, {\n          hero: item,\n          selected: heroSelected,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 13\n          }\n        })));\n      } else {\n        return superHerosList && superHerosList.length > 0 && superHerosList.map(item => /*#__PURE__*/React.createElement(ContainerCard, {\n          onClick: () => this.handleSelectedHero(item),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 362,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(Card, {\n          hero: item,\n          selected: heroSelected,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 363,\n            columnNumber: 13\n          }\n        })));\n      }\n    };\n  }\n\n  componentDidMount() {\n    this.fetchingGetAllHeroes();\n  }\n\n  render() {\n    const {\n      searchValue,\n      searchValueError,\n      isSearch,\n      isFavoritesList,\n      isFetching\n    } = this.state;\n    const {\n      listFavorites\n    } = this.props;\n    return /*#__PURE__*/React.createElement(Layout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 378,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Container, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 379,\n        columnNumber: 9\n      }\n    }, console.log('superHerosList', this.state.superHerosList), /*#__PURE__*/React.createElement(Wrapper, {\n      favsMob: listFavorites.length > 0,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 381,\n        columnNumber: 11\n      }\n    }, isSearch && /*#__PURE__*/React.createElement(ShowButton, {\n      onClick: () => this.setState({\n        isSearch: false\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 383,\n        columnNumber: 15\n      }\n    }, \"Show All\"), listFavorites.length > 0 && /*#__PURE__*/React.createElement(ShowButton, {\n      favsMob: isFavoritesList && listFavorites.length > 0,\n      onClick: this.handleFavorites,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 15\n      }\n    }, !isFavoritesList ? 'Show Favorites' : 'Show All'), /*#__PURE__*/React.createElement(ContainerTitle, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 397,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Title, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 398,\n        columnNumber: 15\n      }\n    }, \"Super Heroes\"), /*#__PURE__*/React.createElement(ContainerSearch, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Input, {\n      label: \"Search for a superhero\",\n      placeholder: \"Search for a superhero\",\n      value: searchValue,\n      onChange: this.handleSearchValue,\n      inputWidth: \"100%\",\n      inputPadding: \"1rem\",\n      borderBottom: \"transparent\",\n      heros: true,\n      search: true,\n      error: searchValueError,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(SearchIcon, {\n      src: searchIcon,\n      alt: \"search\",\n      onClick: this.handleValidateSearchValue,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 412,\n        columnNumber: 17\n      }\n    })), searchValueError && /*#__PURE__*/React.createElement(ErrorMessage, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 418,\n        columnNumber: 36\n      }\n    }, searchValueError)), !isFetching ? /*#__PURE__*/React.createElement(ContainerList, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 421,\n        columnNumber: 15\n      }\n    }, this.renderHeroList()) : /*#__PURE__*/React.createElement(ContainerLoader, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 425,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Loader, {\n      src: loaderIcon,\n      alt: \"loading...\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 426,\n        columnNumber: 17\n      }\n    })))));\n  }\n\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SuperHeroes);","map":{"version":3,"sources":["/home/yasmin/Documentos/personal/code/desafio/desafio-correto/src/screens/SuperHeroes.js"],"names":["React","Component","styled","connect","Card","Input","Layout","getAllHeroes","getHeroByName","searchHero","unfavHero","favHero","mapStateToProps","state","listSearch","heroes","listFavorites","mapDispatchToProps","dispatch","info","Container","div","Wrapper","props","favsMob","ContainerTitle","Title","h2","ContainerSearch","SearchIcon","img","ContainerList","ContainerCard","fav","ContainerLoader","figure","Loader","ErrorMessage","p","ShowButton","button","theme","text","SuperHeroes","superHerosList","searchValue","searchValueError","undefined","isFetching","heroSelected","isSearch","isFavoritesList","fetchingGetAllHeroes","setState","i","response","Math","floor","random","push","setTimeout","error","console","log","fetchingGetHeroByName","heroName","data","results","handleValidateSearchValue","includes","value","split","newValue","x","length","charAt","toUpperCase","slice","join","formatting","toLowerCase","handleFavorites","handleSearchValue","event","target","handleSelectedHero","item","renderHeroList","map","componentDidMount","render","searchIcon","loaderIcon"],"mappings":"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","sourcesContent":["// Libs\nimport React, { Component } from 'react';\nimport styled from 'styled-components';\nimport { connect } from 'react-redux';\n\n// Components\nimport Card from '../components/Card';\nimport Input from '../components/Input';\n\nimport Layout from '../components/layout';\n\n// // Images\nimport searchIcon from '../assets/search.svg';\nimport loaderIcon from '../assets/loader.svg';\n\n// Services\nimport { getAllHeroes, getHeroByName } from '../services/apiSuperHero';\n\n// Redux\nimport { searchHero, unfavHero, favHero } from '../dataflow/modules/heroes-modules';\n\nconst mapStateToProps = (state) => ({\n  listSearch: state.heroes.listSearch,\n  listFavorites: state.heroes.listFavorites,\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  searchHero: (info) => dispatch(searchHero(info)),\n  favHero: (info) => dispatch(favHero(info)),\n  unfavHero: (info) => dispatch(unfavHero(info)),\n});\n\n// Styles\nconst Container = styled.div`\n  width: 80%;\n  height: 100vh;\n  display: flex;\n  ${'' /* background-color: #f2f4f7; */}\n\n  @media(max-width: 648px) {\n    width: 100%;\n  } \n`;\n\nconst Wrapper = styled.div`\n  padding-top: 2rem;\n  width: 100%;\n  display: flex;\n  justify-content: space-between;\n\n  @media(max-width: 768px) {\n    position: ${(props) => props.favsMob && 'relative'};\n    padding-top: ${(props) => props.favsMob && '5rem'};\n    display: flex;\n    flex-direction: column;\n  }\n`;\n\nconst ContainerTitle = styled.div`\n  margin: 2rem;\n  width: 30%;\n  max-width: 30%;\n  height: fit-content;\n\n  @media(max-width: 1024px) {\n    width: 45%;\n  }\n\n  @media(max-width: 768px) {\n    margin: 0;\n    padding: 0 3rem;\n    width: 100%;\n    max-width: 100%;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n  }\n\n  @media(max-width: 648px) {\n    margin-left: 0;\n  }\n`;\n\nconst Title = styled.h2`\n  font-size: 1.5rem;\n  text-align: center;\n`;\n\nconst ContainerSearch = styled.div`\n  margin-top: 2rem;\n  padding: 0;\n  width: 100%;\n  border: 1px solid #842219;\n  border-radius: 20px;\n  display: flex;\n  justify-content: space-around;\n  border-radius: 20px;\n\n  @media(max-width: 768px) {\n    width: 60%;\n  }\n\n  @media(max-width: 648px) {\n    width: 100%;\n  }\n`;\n\nconst SearchIcon = styled.img`\n  margin-right: .5rem;\n  margin-left: .5rem;\n  cursor: pointer;\n`;\n\nconst ContainerList = styled.div`\n  margin-top: 3rem;\n  width: 90%;\n  max-width: 90%;\n  height: 90vh;\n  display: inline-grid;\n  justify-items: center;\n  align-items: flex-start;\n  grid-template-columns: repeat(2, 1fr);\n  grid-row-gap: 1px;\n\n  @media(max-width: 1024px) {\n    padding: 0 5rem;\n    width: 100%;\n    grid-template-columns: repeat(1, 1fr);\n  }\n\n  @media(max-width: 768px) {\n    padding: 0 3rem;\n    max-width: 100%;\n    justify-content: center;\n  }\n\n  @media(max-width: 375px) {\n    padding: 0 1.55rem;\n  }\n`;\n\nconst ContainerCard = styled.div`\n  margin-top: ${(props) => props.fav && '4rem'};\n  width: inherit;\n  display: flex;\n  justify-content: center;\n`;\n\nconst ContainerLoader = styled.figure`\n  width: 100%;\n  height: -webkit-fill-available;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst Loader = styled.img`\n  width: 3rem;\n`;\n\nconst ErrorMessage = styled.p`\n  margin: .5rem 0;\n  color: tomato;\n  font-size: .8rem;\n  font-weight: 800;\n\n  @media(max-width: 648px) {\n    margin-bottom: .9rem;\n  }\n`;\n\nconst ShowButton = styled.button`\n  position: fixed;\n  right: 0;\n  top: 0;\n  margin-top: 1rem;\n  margin-right: 1rem;\n  width: 8rem;\n  height: 3rem;\n  font-size: .8rem;\n  font-weight: 600;\n  color: #fff;\n  border: none;\n  border-radius: 20px;\n  cursor: pointer;\n  outline: none;\n  background-color: ${({ theme }) => theme.text};\n\n  @media(max-width: 768px) {\n    width: 7rem;\n    font-size: .75rem;\n    height: 2.5rem;\n  }\n\n  @media(max-width: 648px) {\n    position: absolute;\n    left: 0;\n    margin: 1rem 0 1rem .5rem;\n    height: 3rem;\n    color: ${({ theme }) => theme.text};\n    border: 1px solid;\n    background: transparent;\n  }\n`;\n\nclass SuperHeroes extends Component {\n  state = {\n    superHerosList: [],\n    searchValue: '',\n    searchValueError: undefined,\n    isFetching: false,\n    heroSelected: undefined,\n    isSearch: false,\n    isFavoritesList: false,\n  }\n\n  componentDidMount() {\n    this.fetchingGetAllHeroes();\n  }\n\n  fetchingGetAllHeroes = async () => {  \n    try {\n      this.setState({\n        isFetching: true,\n      });\n\n      const heroes = [];\n      let i = 1;\n      while(i <= 3) {\n        const response = await getAllHeroes(Math.floor(Math.random() * 731 + 1));\n\n        if (response) {\n          heroes.push(response);\n        }\n\n        i += 1;\n      }\n      setTimeout(() => {\n        this.setState({\n          superHerosList: heroes,\n        })\n\n        // this.props.addHero(heroes);\n        this.setState({\n          isFetching: false,\n        });\n      }, 3000);\n\n    } catch(error) {\n      console.log('error', error);\n      console.log('error - response', error.response);\n    }\n  }\n\n  fetchingGetHeroByName = async (heroName) => {\n    try {\n      this.setState({\n        isFetching: true,\n      });\n\n      const response = await getHeroByName(heroName);\n\n      if(response) {\n        this.setState({\n          isFetching: false,\n          isSearch: true,\n          searchValue: '',\n          superHerosList: response.data.results,\n        });\n\n        // Enviando para o Redux\n        this.props.searchHero(response.data.results);\n      }\n\n    } catch(error) {\n      this.setState({\n        isFetching: false,\n      });\n      console.log('error', error);\n      console.log('error - response', error.response);\n    }\n  }\n\n  handleValidateSearchValue = () => {\n    const { searchValue } = this.state;\n\n    if (!searchValue) {\n      this.setState({\n        searchValueError: 'Enter the name of a superhero.',\n      });\n    } else {\n      this.setState({\n        searchValueError: undefined,\n      });\n      \n      // Colocando a primeira letra das palavras em maiúsculo. No primeiro caso, verifica se há mais de duas palavras.\n      if (searchValue.includes(' ')) {\n        const value = searchValue.split(' ');\n        let newValue = [];\n          \n        for(let x = 0; x < value.length; x++){\n          newValue.push(value[x].charAt(0).toUpperCase()+value[x].slice(1));\n        }\n\n        this.fetchingGetHeroByName(newValue.join(' '));\n      } else {\n        const formatting = searchValue[0].toUpperCase() + searchValue.slice(1).toLowerCase();\n\n        this.fetchingGetHeroByName(formatting);\n      }\n    }\n  }\n\n  handleFavorites = () => {\n    this.setState({\n      isFavoritesList: !this.state.isFavoritesList,\n    });\n  }\n\n  handleSearchValue = (event) => {\n    this.setState({\n      searchValue: event.target.value,\n    });\n  }\n\n  handleSelectedHero = (item) => {\n    this.setState({\n      heroSelected: item,\n    });\n  }\n\n  renderHeroList = () => {\n    const { isSearch, isFavoritesList, heroSelected, superHerosList} = this.state;\n    const { listSearch, listFavorites} = this.props;\n\n    if (isSearch && listSearch.length > 0) {\n      return (\n        listSearch.map(item => (\n          <ContainerCard onClick={() => this.handleSelectedHero(item)}>\n            <Card\n              hero={item}\n              selected={heroSelected}\n            />\n          </ContainerCard>\n        ))\n      )\n    } else if (isFavoritesList && listFavorites.length > 0) {\n      return (\n        listFavorites.map(item => (\n          <ContainerCard onClick={() => this.handleSelectedHero(item)}>\n            <Card\n              hero={item}\n              selected={heroSelected}\n            />\n          </ContainerCard>\n        ))\n      )\n    } else {\n      return (\n        superHerosList && superHerosList.length > 0 && superHerosList.map(item => (\n          <ContainerCard onClick={() => this.handleSelectedHero(item)}>\n            <Card\n              hero={item}\n              selected={heroSelected}\n            />\n          </ContainerCard>\n        ))\n      )\n    }\n  }\n\n  render() {\n    const { searchValue, searchValueError, isSearch, isFavoritesList, isFetching } = this.state;\n    const { listFavorites, } = this.props;\n\n    return (\n      <Layout>\n        <Container>\n        {console.log('superHerosList', this.state.superHerosList)}\n          <Wrapper favsMob={listFavorites.length > 0}>\n            {isSearch && (\n              <ShowButton\n                onClick={() => this.setState({ isSearch: false })}\n              >\n                Show All\n              </ShowButton>\n            )}\n            {listFavorites.length > 0 && (\n              <ShowButton\n                favsMob={isFavoritesList && listFavorites.length > 0}\n                onClick={this.handleFavorites}\n              >\n                {!isFavoritesList ? 'Show Favorites' : 'Show All'}\n              </ShowButton>\n            )}\n            <ContainerTitle>\n              <Title>Super Heroes</Title>\n              <ContainerSearch>\n                <Input \n                  label=\"Search for a superhero\"\n                  placeholder=\"Search for a superhero\"\n                  value={searchValue}\n                  onChange={this.handleSearchValue}\n                  inputWidth=\"100%\"\n                  inputPadding=\"1rem\"\n                  borderBottom=\"transparent\"\n                  heros={true}\n                  search={true}\n                  error={searchValueError}\n                />\n                <SearchIcon\n                  src={searchIcon}\n                  alt=\"search\"\n                  onClick={this.handleValidateSearchValue}\n                />\n              </ContainerSearch>\n              {searchValueError && <ErrorMessage>{searchValueError}</ErrorMessage>}\n            </ContainerTitle>\n            {!isFetching ? (\n              <ContainerList>\n                {this.renderHeroList()}\n              </ContainerList>\n            ) : (\n              <ContainerLoader>\n                <Loader src={loaderIcon} alt=\"loading...\" />\n              </ContainerLoader>\n            )}\n          </Wrapper>\n        </Container>\n      </Layout>\n    )\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SuperHeroes);\n"]},"metadata":{},"sourceType":"module"}